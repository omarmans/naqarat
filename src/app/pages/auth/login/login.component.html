<div class="container mx-auto px-4 py-12">
  <div class="max-w-md mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden">
    <div class="flex">
      <button
        (click)="authMode.set('login')"
        [class]="
          authMode() === 'login'
            ? 'flex-1 py-4 bg-amber-900 text-white font-bold'
            : 'flex-1 py-4 bg-gray-100 text-gray-600 font-bold'
        "
      >
        {{ langService.t("تسجيل الدخول", "Login") }}
      </button>
      <button
        (click)="authMode.set('register')"
        [class]="
          authMode() === 'register'
            ? 'flex-1 py-4 bg-amber-900 text-white font-bold'
            : 'flex-1 py-4 bg-gray-100 text-gray-600 font-bold'
        "
      >
        {{ langService.t("إنشاء حساب", "Register") }}
      </button>
    </div>

    <!-- Login Form -->
    <div *ngIf="authMode() === 'login'" class="p-8">
      <h3 class="text-2xl font-bold text-amber-900 mb-6">
        {{ langService.t("مرحباً بعودتك!", "Welcome Back!") }}
      </h3>
      <form (submit)="handleLogin($event)" #loginForm="ngForm">
        <div class="mb-4">
          <label class="block text-gray-700 mb-2 font-semibold">
            {{ langService.t("البريد الإلكتروني", "Email") }}
          </label>
          <input
            type="email"
            name="loginEmail"
            [(ngModel)]="loginData.email"
            #loginEmail="ngModel"
            required
            email
            class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none"
            [class.border-red-500]="loginEmail.invalid && loginEmail.touched"
            [class.border-amber-300]="
              !loginEmail.invalid || !loginEmail.touched
            "
            [placeholder]="langService.t('أدخل بريدك', 'Enter your email')"
          />
          <p
            *ngIf="loginEmail.invalid && loginEmail.touched"
            class="text-red-500 text-sm mt-1"
          >
            {{ langService.t("البريد الإلكتروني غير صالح", "Invalid email") }}
          </p>
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 mb-2 font-semibold">
            {{ langService.t("كلمة المرور", "Password") }}
          </label>
          <input
            type="password"
            name="loginPassword"
            [(ngModel)]="loginData.password"
            #loginPassword="ngModel"
            required
            minlength="6"
            class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none"
            [class.border-red-500]="
              loginPassword.invalid && loginPassword.touched
            "
            [class.border-amber-300]="
              !loginPassword.invalid || !loginPassword.touched
            "
            [placeholder]="langService.t('أدخل كلمة المرور', 'Enter password')"
          />
          <p
            *ngIf="loginPassword.invalid && loginPassword.touched"
            class="text-red-500 text-sm mt-1"
          >
            {{
              langService.t(
                "كلمة المرور يجب أن تكون 6 أحرف على الأقل",
                "Password must be at least 6 characters"
              )
            }}
          </p>
        </div>
        <button
          type="submit"
          [disabled]="loginForm.invalid"
          class="w-full bg-amber-900 text-white py-3 rounded-lg hover:bg-orange-800 transition font-bold disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ langService.t("تسجيل الدخول", "Login") }}
        </button>
      </form>
    </div>

    <!-- Register Form -->
    <div *ngIf="authMode() === 'register'" class="p-8">
      <h3 class="text-2xl font-bold text-amber-900 mb-6">
        {{ langService.t("إنشاء حساب جديد", "Create Account") }}
      </h3>
      <form (submit)="handleRegister($event)" #registerForm="ngForm">
        <div class="mb-4">
          <label class="block text-gray-700 mb-2 font-semibold">
            {{ langService.t("الاسم الكامل", "Full Name") }}
          </label>
          <input
            type="text"
            name="registerName"
            [(ngModel)]="registerData.name"
            #registerName="ngModel"
            required
            minlength="3"
            class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none"
            [class.border-red-500]="
              registerName.invalid && registerName.touched
            "
            [class.border-amber-300]="
              !registerName.invalid || !registerName.touched
            "
            [placeholder]="langService.t('أدخل اسمك', 'Enter your name')"
          />
          <p
            *ngIf="registerName.invalid && registerName.touched"
            class="text-red-500 text-sm mt-1"
          >
            {{
              langService.t(
                "الاسم يجب أن يكون 3 أحرف على الأقل",
                "Name must be at least 3 characters"
              )
            }}
          </p>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 mb-2 font-semibold">
            {{ langService.t("البريد الإلكتروني", "Email") }}
          </label>
          <input
            type="email"
            name="registerEmail"
            [(ngModel)]="registerData.email"
            #registerEmail="ngModel"
            required
            email
            class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none"
            [class.border-red-500]="
              registerEmail.invalid && registerEmail.touched
            "
            [class.border-amber-300]="
              !registerEmail.invalid || !registerEmail.touched
            "
            [placeholder]="langService.t('أدخل بريدك', 'Enter your email')"
          />
          <p
            *ngIf="registerEmail.invalid && registerEmail.touched"
            class="text-red-500 text-sm mt-1"
          >
            {{ langService.t("البريد الإلكتروني غير صالح", "Invalid email") }}
          </p>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 mb-2 font-semibold">
            {{ langService.t("رقم الهاتف", "Phone") }}
          </label>
          <input
            type="tel"
            name="registerPhone"
            [(ngModel)]="registerData.phone"
            #registerPhone="ngModel"
            required
            pattern="^01[0-2,5]{1}[0-9]{8}$"
            class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none"
            [class.border-red-500]="
              registerPhone.invalid && registerPhone.touched
            "
            [class.border-amber-300]="
              !registerPhone.invalid || !registerPhone.touched
            "
            [placeholder]="langService.t('01xxxxxxxxx', '01xxxxxxxxx')"
          />
          <p
            *ngIf="registerPhone.invalid && registerPhone.touched"
            class="text-red-500 text-sm mt-1"
          >
            {{ langService.t("رقم الهاتف غير صحيح", "Invalid phone number") }}
          </p>
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 mb-2 font-semibold">
            {{ langService.t("كلمة المرور", "Password") }}
          </label>
          <input
            type="password"
            name="registerPassword"
            [(ngModel)]="registerData.password"
            #registerPassword="ngModel"
            required
            minlength="6"
            class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none"
            [class.border-red-500]="
              registerPassword.invalid && registerPassword.touched
            "
            [class.border-amber-300]="
              !registerPassword.invalid || !registerPassword.touched
            "
            [placeholder]="langService.t('أدخل كلمة المرور', 'Enter password')"
          />
          <p
            *ngIf="registerPassword.invalid && registerPassword.touched"
            class="text-red-500 text-sm mt-1"
          >
            {{
              langService.t(
                "كلمة المرور يجب أن تكون 6 أحرف على الأقل",
                "Password must be at least 6 characters"
              )
            }}
          </p>
        </div>
        <button
          type="submit"
          [disabled]="registerForm.invalid"
          class="w-full bg-amber-900 text-white py-3 rounded-lg hover:bg-orange-800 transition font-bold disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ langService.t("إنشاء حساب", "Create Account") }}
        </button>
      </form>
    </div>
  </div>
</div>
